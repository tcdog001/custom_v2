#!/bin/bash

. ${__ROOTFS__}/etc/jsock/jsock.in
. ${__ROOTFS__}/sbin/autelan_functions.sh

#
#call by jsock.cb
#
#$1:body...
#
main() {
	local body="$*"

	jsock_ap_recive_check || {
		return ${e_bad_board}
	}

	local datestr="$(echo ${body} | awk -F '"' '{print $4}')"
	date -s "${datestr}"

	local boardtype="$(get_board_type)"
	if [[ "${boardtype}" == "ap" ]]; then
		[[ ! -f ${SYNTIME} ]] && echo "${datestr}" > ${SYNTIME}
	fi
}

main "$@"
