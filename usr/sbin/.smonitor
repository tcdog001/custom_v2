#!/bin/bash

getpid() {
	local name="$1"

	local count=$(ps | grep "${name}" | grep -v smonitor | grep -v grep | wc -l)
        if ((0==count)); then
                echo 0
	else
		ps | grep "${name}" | grep -v smonitor | grep -v grep | head -n 1 | awk '{print $1}'
        fi
}

main() {
	local argc=$#
	local name="$1"

	if ((1!=argc)); then
		return 1
	fi


	sleep 3

	smonitorc report "${name}" $(getpid "${name}")
}

main "$@"
