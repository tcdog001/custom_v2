#!/bin/bash

getpid() {
	local name="$1"
	local pid=$(ps | grep "${name}" | grep -v smonitor | grep -v grep | head -n 1 | awk '{print $1}')
	local err

	expr ${pid} + 1 &> /dev/null; err=$?
	if ((0==err)); then
		echo ${pid}
	else
		echo 0
	fi
}

main() {
	local argc=$#
	local name="$1"

	if ((1!=argc)); then
		return 1
	fi


	sleep 3

	smonitorc report "${name}" $(getpid "${name}")
}

main "$@"
